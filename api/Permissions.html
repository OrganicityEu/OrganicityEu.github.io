<!DOCTYPE html>
<html>
<head>
  <title>OrganiCity API</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="oc.css">
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js">
  </script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js">
  </script>
  <![endif]-->
</head>
<body>
  <div id="top" class="container oc-page-wrapper">
  <div class="row">
    <nav role="navigation" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand active" href="http://organicity.eu/">
            <img src="static/img/oc_logo.png">
          </a>
          <button class="navbar-toggle" type="button">
            <span class="sr-only">Toggle navigation
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
          </button>
        </div>
        <div class="navbar-collapse collapse" aria-expanded="false">
          <span class="oc-left-links-wrapper">
          </span>
          <ul class="nav navbar-nav navbar-right">
            <li role="presentation">
              <a href="index.html" aria-selected="false">Overview
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </div>
  <div class="container">
    <h1>Organicity Accounts - Permission Component</h1>
    <p class="sw-info-version">Version: <span>0.1.1-development</span></p>
    <p><p>Several functions of Organicity are not available to any user, but
    require additional permissions to be executed. This component
    streamlines the handling of reading, editing and assigning roles
    for specific users.</p>
    </p>
    
    
    <p class="sw-default-value">
        <span class="sw-default-value-header">Schemes:</span>
        https
    </p>
    
      <p>
      <span class="sw-default-value-header">Base URL:</span>
      <a href="https://accounts.organicity.eu/permissions/">
      https://accounts.organicity.eu/permissions/
      </a>
      </p>
    
    
    
        <h2 id="swagger--summary-no-tags">Summary</h2>
        
            <div class="panel">
              <div class="panel-body">
        
        <table class="table table-condensed swagger--summary">
            <thead>
            <tr>
                <th>Path</th>
                <th>Operation</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
                    <tr>
                            <td class="swagger--summary-path" rowspan="2">
                                <a href="#path--users--userId--roles">/users/{userId}/roles</a>
                            </td>
                        <td>
                            <a href="#operation--users--userId--roles-get">GET</a>
                        </td>
                        <td>
                            <p>Retrieves a list of all available roles of a user</p>
        
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a href="#operation--users--userId--roles-post">POST</a>
                        </td>
                        <td>
                            <p>Add a role to a user</p>
        
                        </td>
                    </tr>
                    <tr>
                            <td class="swagger--summary-path" rowspan="2">
                                <a href="#path--users--userId--roles--roleName-">/users/{userId}/roles/{roleName}</a>
                            </td>
                        <td>
                            <a href="#operation--users--userId--roles--roleName--delete">DELETE</a>
                        </td>
                        <td>
                            <p>Removes a specific role from a user</p>
        
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a href="#operation--users--userId--roles--roleName--get">GET</a>
                        </td>
                        <td>
                            <p>Tests if a user is assigned a specific role</p>
        
                        </td>
                    </tr>
            </tbody>
        </table>
        
              </div>
            </div>
    
    
    <h2>Security</h2>
    
    <div id="security-definition-OrganicityPermissions" class="panel panel-security-definition panel-security-definition-oauth2">
      <div class="panel-heading">
        <h3 class="panel-title"><span class="security-name">OrganicityPermissions</span> <strong><span class="sw-security-definition-oauth2"></span></strong></h3>
      </div>
      <div class="panel-body">
        <section class="sw-security-properties">
          <dl>
          </dt>
          <dl>
            <dt class="security-property-name">flow:</dt>
            <dd class="security-property-type">
              accessCode
            </dd>
          </dt>
          <dl>
            <dt class="security-property-name">authorizationUrl:</dt>
            <dd class="security-property-type">
              https://accounts.organicity.eu/realms/organicity/protocol/openid-connect/auth
            </dd>
          </dt>
          <dl>
            <dt class="security-property-name">tokenUrl:</dt>
            <dd class="security-property-type">
              https://accounts.organicity.eu/realms/organicity/protocol/openid-connect/token
            </dd>
          </dt>
        </section>
      </div>
    </div>
    
    <h2>Paths</h2>
    
        
        <span id="path--users--userId--roles"></span>
            <div id="operation--users--userId--roles-get" class="swagger--panel-operation-get panel">
                <div class="panel-heading">
                    <div class="operation-summary">Retrieves a list of all available roles of a user</div>
                    <h3 class="panel-title"><span class="operation-name">GET</span> <strong>/users/{userId}/roles</strong></h3>
                </div>
                <div class="panel-body">
                    <section class="sw-operation-description">
                        <p>This endpoint retrieves a list of all roles available to the
            supplied user and visible to the requesting tool. This
            includes global roles as well as roles specific to the
            requesting tool.</p>
            <p>Consequently, this call must be authorized with a tool token,
            i.e. the supplied Bearer Token must belong to tool that
            requests the list of roles.</p>
            
                    </section>
                    
                        <section class="sw-request-params">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th class="sw-param-name"></th>
                                    <th class="sw-param-description"></th>
                                    <th class="sw-param-type"></th>
                                    <th class="sw-param-data-type"></th>
                                    <th class="sw-param-annotation"></th>
                                </tr>
                                </thead>
                                <tbody>
                                        <tr>
                                            <td>
                                                userId
                                            <td><p>The identifier of the user, as given by the subject field
                                        in the user&#39;s ID Token (the authentication token handed
                                        out by Organicity Accounts on login).</p>
                                        </td>
                                            <td>path</td>
                                            <td><span class="json-property-type">string</span>
                                        <span class="json-property-range" title="Value limits"></span>
                                        
                                            </td>
                                            <td>
                                                    <span class="json-property-required"></span>
                                            </td>
                                        </tr>
                                </tbody>
                            </table>
                        </section>
                    
                      <section class="sw-responses">
                          <p><span class="label label-default">application/json</span> 
                    </p>
                    
                        <dl>
                            <dt class="sw-response-200">
                              200 OK
                    
                            </dt>
                            <dd class="sw-response-200">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The request has been processed and the determined roles
                                are returned.</p>
                                <p>Note that for a user that has no (visible) roles, an empty
                                list is returned.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 sw-response-examples">
                                      <div class="label label-default">Example for application/json</div>
                                      <pre><code class="lang-json">[<br>    <span class="hljs-string">&quot;createAsset&quot;</span>,<br>    <span class="hljs-string">&quot;searchAssets&quot;</span>,<br>    <span class="hljs-string">&quot;manageExperiment&quot;</span>,<br>    <span class="hljs-string">&quot;dataReputation:editApplications&quot;</span><br>]
                                </code></pre>
                                
                                    </div>
                                </div>
                                
                                  <div class="row body-content">
                                    <div class="col-md-6 sw-response-model">
                                          
                                              <div id="definition-Body-Schema" class="panel panel-definition">
                                                  <div class="panel-heading">
                                                    <h3 class="panel-title">
                                                        Body Schema:
                                                        <span class="json-property-type"><span class="json-property-type">object[]</span>
                                              <span class="json-property-range" title="Value limits"></span>
                                              
                                              </span>
                                                    </h3>
                                                  </div>
                                                <div class="panel-body">
                                                        <section class="json-schema-description">
                                                            <p>An array of strings, where each string describes a
                                                    role assigned to the user.</p>
                                                    
                                                        </section>
                                                    
                                                                    <section class="json-schema-array-items">
                                                                        <span class="json-property-type">    Reference: <a class="json-schema-ref" href="#/definitions/Role">Role</a>
                                                                        </span>
                                                                        <span class="json-property-range" title="Value limits"></span>
                                                                        
                                                                        <div class="json-inner-schema">
                                                                            
                                                                        </div>
                                                                    </section>  </div>
                                              </div>
                                    </div>
                                  </div>
                                
                            </dd>
                            <dt class="sw-response-401">
                              401 Unauthorized
                    
                            </dt>
                            <dd class="sw-response-401">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The requesting client did not supply identify information
                                (see <a href="#security-definition-OrganicityPermissions">Security
                                Definitions</a>).</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-403">
                              403 Forbidden
                    
                            </dt>
                            <dd class="sw-response-403">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The requesting client does not have sufficient permissions
                                to inspect the roles of users.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-404">
                              404 Not Found
                    
                            </dt>
                            <dd class="sw-response-404">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The supplied user ID does not denote an existing user.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                        </dl>
                      </section>
                </div>
            </div>    <div id="operation--users--userId--roles-post" class="swagger--panel-operation-post panel">
                <div class="panel-heading">
                    <div class="operation-summary">Add a role to a user</div>
                    <h3 class="panel-title"><span class="operation-name">POST</span> <strong>/users/{userId}/roles</strong></h3>
                </div>
                <div class="panel-body">
                    <section class="sw-operation-description">
                        <p>This endpoint allows tools to assign roles to a specific user,
            effectively allowing the user to perform additional actions.</p>
            <p>This call must be authorized with a tool token, i.e. the
            supplied Bearer Token must belong to tool that performs the
            call to this endpoint.</p>
            
                    </section>
                        
                        <section class="sw-request-body">
                          
                             <p><p>The new role to be assigned to the user.</p>
                        </p>
                              <div class="row body-content">
                               <div class="col-md-6 sw-request-model">
                                
                                    <div id="definition-role" class="panel panel-definition">
                                        <div class="panel-heading">
                                          <h3 class="panel-title">
                                              role
                                          </h3>
                                        </div>
                                      <div class="panel-body">
                                              Reference: <a class="json-schema-ref" href="#/definitions/Role">Role</a>
                                      </div>
                                    </div>
                               </div>
                              </div>
                        </section>
                    
                        <section class="sw-request-params">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th class="sw-param-name"></th>
                                    <th class="sw-param-description"></th>
                                    <th class="sw-param-type"></th>
                                    <th class="sw-param-data-type"></th>
                                    <th class="sw-param-annotation"></th>
                                </tr>
                                </thead>
                                <tbody>
                                        <tr>
                                            <td>
                                                userId
                                            <td><p>The identifier of the user, as given by the subject field
                                        in the user&#39;s ID Token (the authentication token handed
                                        out by Organicity Accounts on login).</p>
                                        </td>
                                            <td>path</td>
                                            <td><span class="json-property-type">string</span>
                                        <span class="json-property-range" title="Value limits"></span>
                                        
                                            </td>
                                            <td>
                                                    <span class="json-property-required"></span>
                                            </td>
                                        </tr>
                                </tbody>
                            </table>
                        </section>
                    
                      <section class="sw-responses">
                    
                        <dl>
                            <dt class="sw-response-201">
                              201 Created
                    
                            </dt>
                            <dd class="sw-response-201">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The given role was successfully assigned to the specified
                                user. This reply is also returned if the role was already
                                assigned to the user previously; in that case, no changes
                                have been made.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-401">
                              401 Unauthorized
                    
                            </dt>
                            <dd class="sw-response-401">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The requesting client did not supply identify information
                                (see <a href="#security-definition-OrganicityPermissions">Security
                                Definitions</a>).</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-403">
                              403 Forbidden
                    
                            </dt>
                            <dd class="sw-response-403">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The requesting client does not have sufficient permissions
                                to assign roles to users.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-404">
                              404 Not Found
                    
                            </dt>
                            <dd class="sw-response-404">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The supplied user ID does not denote an existing user.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                        </dl>
                      </section>
                </div>
            </div>    
        <span id="path--users--userId--roles--roleName-"></span>
            <div id="operation--users--userId--roles--roleName--delete" class="swagger--panel-operation-delete panel">
                <div class="panel-heading">
                    <div class="operation-summary">Removes a specific role from a user</div>
                    <h3 class="panel-title"><span class="operation-name">DELETE</span> <strong>/users/{userId}/roles/{roleName}</strong></h3>
                </div>
                <div class="panel-body">
                    <section class="sw-operation-description">
                        <p>This endpoint allows a requesting client to remove a role from
            a user, effectively revoking permissions or access to specific
            resources.</p>
            <p>This endpoint only allows a requesting tool to manipulate the
            global roles or the roles specific to itself. A tool cannot
            remove permissions assigned to the user that are specific to a
            different tool.</p>
            
                    </section>
                    
                        <section class="sw-request-params">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th class="sw-param-name"></th>
                                    <th class="sw-param-description"></th>
                                    <th class="sw-param-type"></th>
                                    <th class="sw-param-data-type"></th>
                                    <th class="sw-param-annotation"></th>
                                </tr>
                                </thead>
                                <tbody>
                                        <tr>
                                            <td>
                                                userId
                                            <td><p>The identifier of the user, as given by the subject field
                                        in the user&#39;s ID Token (the authentication token handed
                                        out by Organicity Accounts on login).</p>
                                        </td>
                                            <td>path</td>
                                            <td><span class="json-property-type">string</span>
                                        <span class="json-property-range" title="Value limits"></span>
                                        
                                            </td>
                                            <td>
                                                    <span class="json-property-required"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                roleName
                                            <td><p>The role to be checked for. This needs to adhere to the
                                        format specified in the <a href="#/definitions/Role">Role Type
                                        Definition</a>.</p>
                                        </td>
                                            <td>path</td>
                                            <td><span class="json-property-type">string</span>
                                        <span class="json-property-range" title="Value limits"></span>
                                        
                                            </td>
                                            <td>
                                                    <span class="json-property-required"></span>
                                            </td>
                                        </tr>
                                </tbody>
                            </table>
                        </section>
                    
                      <section class="sw-responses">
                    
                        <dl>
                            <dt class="sw-response-200">
                              200 OK
                    
                            </dt>
                            <dd class="sw-response-200">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The given role has been successfully removed from the
                                supplied user.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-401">
                              401 Unauthorized
                    
                            </dt>
                            <dd class="sw-response-401">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The requesting client did not supply identify information
                                (see <a href="#security-definition-OrganicityPermissions">Security
                                Definitions</a>).</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-403">
                              403 Forbidden
                    
                            </dt>
                            <dd class="sw-response-403">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The requesting client does not have the permissions to
                                remove roles.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-404">
                              404 Not Found
                    
                            </dt>
                            <dd class="sw-response-404">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The user ID does not describe a valid user, or the role
                                name does not denote a valid role.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                        </dl>
                      </section>
                </div>
            </div>    <div id="operation--users--userId--roles--roleName--get" class="swagger--panel-operation-get panel">
                <div class="panel-heading">
                    <div class="operation-summary">Tests if a user is assigned a specific role</div>
                    <h3 class="panel-title"><span class="operation-name">GET</span> <strong>/users/{userId}/roles/{roleName}</strong></h3>
                </div>
                <div class="panel-body">
                    <section class="sw-operation-description">
                        <p>This endpoint can be used if a tool is not interested in the
            complete list of assigned roles, but wants to check one
            specific role for a user.</p>
            
                    </section>
                    
                        <section class="sw-request-params">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th class="sw-param-name"></th>
                                    <th class="sw-param-description"></th>
                                    <th class="sw-param-type"></th>
                                    <th class="sw-param-data-type"></th>
                                    <th class="sw-param-annotation"></th>
                                </tr>
                                </thead>
                                <tbody>
                                        <tr>
                                            <td>
                                                userId
                                            <td><p>The identifier of the user, as given by the subject field
                                        in the user&#39;s ID Token (the authentication token handed
                                        out by Organicity Accounts on login).</p>
                                        </td>
                                            <td>path</td>
                                            <td><span class="json-property-type">string</span>
                                        <span class="json-property-range" title="Value limits"></span>
                                        
                                            </td>
                                            <td>
                                                    <span class="json-property-required"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                roleName
                                            <td><p>The role to be checked for. This needs to adhere to the
                                        format specified in the <a href="#/definitions/Role">Role Type
                                        Definition</a>.</p>
                                        </td>
                                            <td>path</td>
                                            <td><span class="json-property-type">string</span>
                                        <span class="json-property-range" title="Value limits"></span>
                                        
                                            </td>
                                            <td>
                                                    <span class="json-property-required"></span>
                                            </td>
                                        </tr>
                                </tbody>
                            </table>
                        </section>
                    
                      <section class="sw-responses">
                    
                        <dl>
                            <dt class="sw-response-200">
                              200 OK
                    
                            </dt>
                            <dd class="sw-response-200">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The role is assigned to the user.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-401">
                              401 Unauthorized
                    
                            </dt>
                            <dd class="sw-response-401">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The requesting client did not supply identify information
                                (see <a href="#security-definition-OrganicityPermissions">Security
                                Definitions</a>).</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-403">
                              403 Forbidden
                    
                            </dt>
                            <dd class="sw-response-403">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The requesting client does not have the permissions to
                                inspect roles, or the client tried to inspect permissions
                                that are not visible to the client (e.g. because they
                                belong to a different tool).</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-404">
                              404 Not Found
                    
                            </dt>
                            <dd class="sw-response-404">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The user ID does not describe a valid user, or the role
                                name does not denote a valid role.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                        </dl>
                      </section>
                </div>
            </div>
     
    
                       
        <h2>Schema definitions</h2>
    
            
                <div id="definition-Role" class="panel panel-definition">
                    <div class="panel-heading">
                      <h3 class="panel-title">
                          <a name="/definitions/Role"></a>
                          Role:
                          <span class="json-property-type"><span class="json-property-type">string</span>
                <span class="json-property-range" title="Value limits"></span>
                
                </span>
                      </h3>
                    </div>
                  <div class="panel-body">
                          <section class="json-schema-description">
                              <p>The actual roles managed by the Organicity Permissions. Roles
                      are represented by strings, which can come in two flavours: A
                      role might be a global role, applying to all of Organicity, or
                      it might be specific to a single tool (a Client from the view of
                      Organicity Accounts). A tool-specific role is always prefixed
                      with the tool name and a colon. For example, the global role to
                      create a new asset is called: <code>createAsset</code>. In contrast, the
                      specific role of an administrator of the Scenario Tool is
                      called: <code>scenarios:administrator</code>.</p>
                      <p>Note that tool-specific roles are only visible to the respective
                      tools. Consequently, when a tool queries the Permission
                      Component for the roles of a single user, only the global roles
                      and the roles specific to the querying tool are returned.</p>
                      <p>The following global roles are currently available. For a
                      description of the purpose of these roles, please refer to the
                      <a href="https://docs.google.com/document/d/1Owz9RfvL2-jUAFtV_6nIe-jD4qlubq8RFAM2e7CNXoo/edit">Roles and Permissions in
                      Organicity</a>
                      document available on Google Drive.</p>
                      <ul>
                      <li><code>readProtectedAssets</code></li>
                      <li><code>createAssets</code></li>
                      <li><code>manageAssets</code></li>
                      <li><code>readProtectedData</code></li>
                      <li><code>createData</code></li>
                      <li><code>manageData</code></li>
                      </ul>
                      <blockquote>
                      <p>TODO: Add remaining roles.</p>
                      </blockquote>
                      
                          </section>
                          <section class="json-schema-example">
                              <pre><code class="lang-json"><span class="hljs-string">&quot;createAsset&quot;</span>
                      </code></pre>
                      
                          </section>
                      
                  </div>
                </div>
    
  </div>
  
  <div class="oc-footers">
    <div class="row oc-footer-large">
      <h1 class="oc-home-view-title">Follow us
      </h1>
      <div class="oc-footer-large-social-links">
        <a href="https://twitter.com/organicity_eu">
          <span class="fa fa-twitter">
          </span>
        </a>
        <a href="https://www.facebook.com/OrganiCities">
          <span class="fa fa-facebook-official">
          </span>
        </a>
      </div>
      <img class="oc-footer-large-eu-logo" src="static/img/logo_eu.png">
      </div>
      <div class="row oc-footer-small">
        <div class="col-md-2">&copy; OrganiCity 2015
        </div>
        <div class="col-md-1">
        </div>
        <div class="col-md-4">
          <a class="oc-link" href="http://organicity.eu/">VISIT ORGANICITY.EU TO FIND OUT MORE
          </a>
        </div>
        <div class="col-md-5">
          <div>
            <h4>Contact Us
            </h4>
              <a href="mailto:info@organicity.eu">info@organicity.eu
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
